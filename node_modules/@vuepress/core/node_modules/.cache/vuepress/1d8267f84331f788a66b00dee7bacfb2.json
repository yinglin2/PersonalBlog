{"remainingRequest":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/babel-loader/lib/index.js??ref--3-1!/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/vue-loader/lib/loaders/templateLoader.js??ref--6!/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/cache-loader/dist/cjs.js??ref--1-0!/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/vue-loader/lib/index.js??ref--1-1!/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/@vuepress/markdown-loader/index.js??ref--1-2!/Users/yinglin/Documents/GitHub/PersonalBlog/docs/distributedsystem/communication/RPC.md?vue&type=template&id=32914b42","dependencies":[{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/docs/distributedsystem/communication/RPC.md","mtime":1706333908546},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/cache-loader/dist/cjs.js","mtime":1706165460692},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/cache-loader/dist/cjs.js","mtime":1706165460692},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/babel-loader/lib/index.js","mtime":1706165460624},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/vue-loader/lib/loaders/templateLoader.js","mtime":1706165461353},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/cache-loader/dist/cjs.js","mtime":1706165460692},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/vue-loader/lib/index.js","mtime":1706165461353},{"path":"/Users/yinglin/Documents/GitHub/PersonalBlog/node_modules/@vuepress/markdown-loader/index.js","mtime":1706165461696}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:dmFyIHJlbmRlciA9IGZ1bmN0aW9uIHJlbmRlcigpIHsKICB2YXIgX3ZtID0gdGhpcywKICAgIF9jID0gX3ZtLl9zZWxmLl9jOwogIHJldHVybiBfYygnQ29udGVudFNsb3RzRGlzdHJpYnV0b3InLCB7CiAgICBhdHRyczogewogICAgICAic2xvdC1rZXkiOiBfdm0uJHBhcmVudC5zbG90S2V5CiAgICB9CiAgfSwgW19jKCdoMScsIHsKICAgIGF0dHJzOiB7CiAgICAgICJpZCI6ICLku4DkuYjmmK9ycGMiCiAgICB9CiAgfSwgW19jKCdhJywgewogICAgc3RhdGljQ2xhc3M6ICJoZWFkZXItYW5jaG9yIiwKICAgIGF0dHJzOiB7CiAgICAgICJocmVmIjogIiPku4DkuYjmmK9ycGMiCiAgICB9CiAgfSwgW192bS5fdigiIyIpXSksIF92bS5fdigiIOS7gOS5iOaYr1JQQz8iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJSUEPnmoTlhajnp7DmmK9SZW1vdGUgUHJvY2VkdXJlIENhbGwsIOWNs+i/nOeoi+i/h+eoi+iwg+eUqOOAgiBSUEPluK7liqnmiJHku6zlsY/olL3kuobnvZHnu5znvJbnqIvnu4boioLvvIzlrp7njrDosIPnlKjov5znqIvmlrnms5XlsLHot5/osIPnlKjmnKzlnLDmlrnms5XkuIDmoLfnmoTkvZPpqozjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCJSUEPnmoTkuLvopoHkvZznlKjkvZPnjrDlnKjku6XkuIvkuKTmlrnpnaLvvJoiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ29sJywgW19jKCdsaScsIFtfdm0uX3YoIuWxj+iUvei/nOeoi+iwg+eUqOi3n+acrOWcsOiwg+eUqOeahOWMuuWIq++8jOiuqeaIkeS7rOaEn+inieWwseaYr+iwg+eUqOmhueebruWGheeahOaWueazlSIpXSksIF92bS5fdigiICIpLCBfYygnbGknLCBbX3ZtLl92KCLpmpDol4/lupXlsYLnvZHnu5zpgJrkv6HnmoTlpI3mnYLmgKfvvIzorqnmiJHku6zmm7TkuJPms6jkuJrliqHpgLvovpEiKV0pXSksIF92bS5fdigiICIpLCBfYygnaDEnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAicnBj6YCa5L+h5rWB56iLIgogICAgfQogIH0sIFtfYygnYScsIHsKICAgIHN0YXRpY0NsYXNzOiAiaGVhZGVyLWFuY2hvciIsCiAgICBhdHRyczogewogICAgICAiaHJlZiI6ICIjcnBj6YCa5L+h5rWB56iLIgogICAgfQogIH0sIFtfdm0uX3YoIiMiKV0pLCBfdm0uX3YoIiBSUEPpgJrkv6HmtYHnqIsiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLlnKhSUEPmoYbmnrbkuK3vvIzmnI3liqHosIPnlKjnmoTlj5HotbfogIXlj6vlgZrosIPnlKjmlrnvvIzooqvosIPnlKjnmoTkuIDmlrnlj6vlgZrmnI3liqHnmoTmj5DkvpvmlrnjgILlroPku6zkuYvpl7TpnIDopoHpgJrov4fnvZHnu5zmnaXkvKDovpPmlbDmja7jgILkuLrkuobnoa7kv53mlbDmja7kvKDovpPnmoTlj6/pnaDmgKfvvIzpu5jorqTmg4XlhrXkuIssIFJQQ+aYr+mHh+eUqFRDUOadpeS8oOi+k+eahOOAgiIpXSksIF92bS5fdigiICIpLCBfYygncCcsIFtfYygnaW1nJywgewogICAgYXR0cnM6IHsKICAgICAgInNyYyI6IHJlcXVpcmUoIi4uL19pbWFnZS9pbWFnZS0yMDI0MDEyNjE5MTcxNzQ0MC5wbmciKSwKICAgICAgImFsdCI6ICJpbWFnZS0yMDI0MDEyNjE5MTcxNzQ0MCIKICAgIH0KICB9KV0pLCBfdm0uX3YoIiAiKSwgX2MoJ29sJywgW19jKCdsaScsIFtfYygncCcsIFtfdm0uX3YoIuWPkemAgeivt+axguWSjOaVsOaNru+8mueUseS6jue9kee7nOS8oOi+k+i/h+eoi+S4reW/hemhu+aYr+S6jOi/m+WItuaVsOaNruOAguWcqOmdouWQkeWvueixoeivreiogOS4re+8jOavlOWmgmphdmHvvIzmlbDmja7lj4LmlbDkuIDoiKzpg73mmK/kv53lrZjlnKjlr7nosaHlvZPkuK3nmoTjgILmiYDku6XmiJHku6zpnIDopoHmiorlr7nosaHovazlj5jmiJDlj6/kvKDovpPnmoTkuozov5vliLbvvIzlubbkuJTopoHmsYLov5nkuKrovazmjaLnrpfms5XmmK/lj6/pgIbnmoTvvIzov5nkuKrov4fnqIvlj6vlgZrigJzluo/liJfljJbigJ3jgIIiKV0pXSksIF92bS5fdigiICIpLCBfYygnbGknLCBbX2MoJ3AnLCBbX3ZtLl92KCLmjqXmlLbor7fmsYLlkozmlbDmja7vvJrosIPnlKjmlrnmiormlbDmja7luo/liJfljJbmiJDkuozov5vliLbmlbDmja7lkI7vvIznu4/ov4dUQ1DlsIbmlbDmja7lj5HpgIHnu5nmnI3liqHmj5DkvpvmlrnjgILpgqPkuYjov5nph4zmnInkuIDkuKrpl67popjlsLHmmK/mnI3liqHmj5DkvpvmlrnmmK/lpoLkvZXnn6XpgZPkuIDkuKror7fmsYLnmoTmlbDmja7liLDlk6rph4znu5PmnZ/vvIzmmK/kuIDkuKrku4DkuYjnsbvlnovnmoTor7fmsYLlkaLvvJ8iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLmiJHku6zmmK/pgJrov4figJzljY/orq7igJ3op4TlrprkuobmlbDmja7ljIXnmoTnsbvlnovlkozplb/luqbjgILlpKflpJrmlbDnmoTljY/orq7kvJrliIbmiJDkuKTkuKrpg6jliIbvvIzliIbliKvmmK/mlbDmja7lpLTlkozmtojmga/kvZPjgILmlbDmja7lpLTkuIDoiKznlKjkuo7ouqvku73or4bliKvvvIzljIXmi6zljY/orq7moIfor4bjgIHmlbDmja7lpKflsI/jgIHor7fmsYLnsbvlnovjgIHluo/liJfljJbnsbvlnovnrYnkv6Hmga/vvJvmtojmga/lpLTkuLvopoHmmK/or7fmsYLnmoTkuJrliqHlj4LmlbDkv6Hmga/lkozmianlsZXlsZ7mgKfnrYnjgIIiKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLmja7ljY/orq7moLzlvI/vvIzmnI3liqHmj5DkvpvmlrnlsLHlj6/ku6XmraPnoa7lnLDku47kuozov5vliLbmlbDmja7kuK3liIblibLlh7rkuI3lkIznmoTor7fmsYLmnaXvvIzlkIzml7bmoLnmja7or7fmsYLnsbvlnovlkozluo/liJfljJbnsbvlnovvvIzmiorkuozov5vliLbnmoTmtojmga/kvZPpgIblkJHov5jljp/miJDor7fmsYLlr7nosaHjgILov5nkuKrov4fnqIvlj6vkvZzigJzlj43luo/liJfljJbigJ3jgIIiKV0pXSksIF92bS5fdigiICIpLCBfYygnbGknLCBbX2MoJ3AnLCBbX3ZtLl92KCLlm57lpI3or7fmsYLvvJrmnI3liqHmj5Dkvpvmlrnlho3moLnmja7lj43luo/liJfljJblh7rmnaXnmoTor7fmsYLlr7nosaHmib7liLDlr7nlupTnmoTlrp7njrDnsbvvvIzlrozmiJDnnJ/mraPnmoTmlrnms5XosIPnlKjvvIznhLblkI4g5oqK5omn6KGM57uT5p6c5bqP5YiX5YyW5ZCO77yM5Zue5YaZ5Yiw5a+55bqU55qEIFRDUCDpgJrpgZPph4zpnaLjgILosIPnlKjmlrnojrflj5bliLDlupTnrZTnmoTmlbDmja7ljIXlkI7vvIzlho3lj40g5bqP5YiX5YyW5oiQ5bqU562U5a+56LGh77yM6L+Z5qC36LCD55So5pa55bCx5a6M5oiQ5LqG5LiA5qyhIFJQQyDosIPnlKjjgIIiKV0pXSldKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW19jKCdpbWcnLCB7CiAgICBhdHRyczogewogICAgICAic3JjIjogcmVxdWlyZSgiLi4vX2ltYWdlL2ltYWdlLTIwMjQwMTI2MTkzNjE4MTQ3LnBuZyIpLAogICAgICAiYWx0IjogImltYWdlLTIwMjQwMTI2MTkzNjE4MTQ3IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnaDEnLCB7CiAgICBhdHRyczogewogICAgICAiaWQiOiAicnBj5Y2P6K6uIgogICAgfQogIH0sIFtfYygnYScsIHsKICAgIHN0YXRpY0NsYXNzOiAiaGVhZGVyLWFuY2hvciIsCiAgICBhdHRyczogewogICAgICAiaHJlZiI6ICIjcnBj5Y2P6K6uIgogICAgfQogIH0sIFtfdm0uX3YoIiMiKV0pLCBfdm0uX3YoIiBSUEPljY/orq4iKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX2MoJ3N0cm9uZycsIFtfdm0uX3YoIuS4uuS7gOS5iOmcgOimgeWNj+iuru+8nyIpXSldKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW192bS5fdigi5Zug5Li65oiR5Lus6ZyA6KaB5oqK5a+56LGh5pWw5o2u6L2s5Y+Y5oiQ5LqM6L+b5Yi25pWw5o2u5omN6IO95aSf5Zyo572R57uc5Lit5Lyg6L6T77yM5Lyg6L6T6L+H56iL5Lit77yMUlBD5Y+v6IO95Lya5LiN5Lya5oqK5pWw5o2u5pS+5Zyo5LiA5Liq5pWw5o2u5YyF5LiL5LiA6LW35Y+R6YCB77yM5Y+v6IO95Lya5ouG5YiG5oiQ5aW95Yeg5Liq5pWw5o2u5YyF5Y+R6YCB77yM5omA5Lul5oiR5Lus6ZyA6KaB5LiA5Liq5Y2P6K6u5Y676KeE5a6a77yM6K6p5o6l5pS25pa55Y+v5Lul5q2j56Gu55qE5YiG5riF5qWa5pWw5o2u55qE6L6555WM77yM5q2j56Gu6Kej5p6Q5pWw5o2u44CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW19jKCdzdHJvbmcnLCBbX3ZtLl92KCLmgI7kuYjorr7orqHkuIDkuKpSUEPljY/orq7lkaLvvJ8iKV0pXSksIF92bS5fdigiICIpLCBfYygncCcsIFtfdm0uX3YoIuaIkeS7rOacgOeGn+aCieeahOWNj+iuruW6lOivpeWwseaYr0hUVFDljY/orq4sIFJQQ+WSjEhUVFDljY/orq7pg73mmK/lupTnlKjlsYLnmoTljY/orq7jgILkuLrku4DkuYjmiJHku6zkuI3og73nm7TmjqXkvb/nlKhIVFRQ5Y2P6K6u5ZGi77yfIildKSwgX3ZtLl92KCIgIiksIF9jKCdvbCcsIFtfYygnbGknLCBbX2MoJ3AnLCBbX3ZtLl92KCLov5nmmK/lm6DkuLpSUEPkuLvopoHmmK/nlKjmnaXotJ/otKPlupTnlKjpl7TnmoTpgJrkv6HvvIzmiYDku6XkvJrlr7nmgKfog73opoHmsYLmr5TovoPpq5jjgILkvYbmmK9IVFRQ5Y2P6K6u55qE5pWw5o2u5YyF5aSn5bCP55u45a+56K+35rGC5pWw5o2u5pys6Lqr6KaB5aSn55qE5b6I5aSa77yM5Y+I6ZyA6KaB5Yqg5YWl5b6I5aSa5peg55So55qE5YaF5a6577yM5q+U5aaC5o2i6KGM56ym5Y+344CB5Zue6L2m56ym562J44CCIildKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ2xpJywgW19jKCdwJywgW192bS5fdigiSFRUUOWNj+iuruWxnuS6juaXoOeKtuaAgeWNj+iuru+8jOWuouaIt+err+aXoOazleWvueivt+axguWSjOWTjeW6lOi/m+ihjOWFs+iBlO+8jOavj+asoeivt+axgumDvemcgOimgemHjeaWsOW7uueri+i/nuaOpe+8jOWTjeW6lOWujOaIkOWQjuWGjeWFs+mXrei/nuaOpeOAguWboOatpO+8jOWvueS6juimgeaxgumrmOaAp+iDveeahFJQQ+adpeivtO+8jEhUVFDljY/orq7ln7rmnKzmmK/lvojpmr7mu6HotrPpnIDmsYLvvIzmiYDku6UgUlBDIOS8mumAieaLqeiuvuiuoeabtOe0p+WHkeeahOengeacieWNj+iuriIpXSldKV0pLCBfdm0uX3YoIiAiKSwgX2MoJ3AnLCBbX3ZtLl92KCLkvYbmmK/ljY/orq7kuYvpl7Tpg73mnInkupLpgJrnmoTlnLDmlrnvvIzpgJrov4fop4Llr59IVFRQ5Y2P6K6u77yM5oiR5Lus5Y+v5Lul5LuO5Lit5a2m5Yiw5LuA5LmI77yfIildKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW19jKCdpbWcnLCB7CiAgICBhdHRyczogewogICAgICAic3JjIjogcmVxdWlyZSgiLi4vX2ltYWdlL2ltYWdlLTIwMjQwMTI3MTMwNTAwMzc2LnBuZyIpLAogICAgICAiYWx0IjogImltYWdlLTIwMjQwMTI3MTMwNTAwMzc2IgogICAgfQogIH0pXSksIF92bS5fdigiICIpLCBfYygnb2wnLCBbX2MoJ2xpJywgW192bS5fdigiSFRUUOWIhuaIkOivt+axguWktOWSjOivt+axguS9k+S4pOmDqOWIhu+8mlJQQ+WNj+iuruWQjOagt+WPr+S7peWwhuaVsOaNruWMheWIhuaIkOWNj+iuruWktOWSjOWNj+iuruS9k+OAguWcqOWNj+iuruWktOmHjOmdouS8muWtmOaUvuWPguaVsOS/oeaBr+OAguWNj+iuruS9k+WwseaYr+S6jOi/m+WItuaVsOaNruOAgiIpXSksIF92bS5fdigiICIpLCBfYygnbGknLCBbX3ZtLl92KCJIVFRQ6K+35rGC5aS05YyF5ZCr5pWw5o2u57G75Z6L77yM5Y6L57yp57yW56CB77yM6K+t6KiA562J5L+h5oGv77ya6K6+6K6hUlBD5ZCM5qC36ZyA6KaB5LiA5Liq5Zu65a6a5L2N572u5Y675a2Y5pS+5LiA5Lqb6K+35rGC55qE5Y+C5pWw5L+h5oGv77yM5q+U5aaC5raI5oGv6ZW/5bqm77yM5raI5oGv57G75Z6L77yM5bqP5YiX5YyW5pa55byP562J5L+h5oGv77yM5Lul5L6/5o6l5pS25pa55Y+v5Lul5q2j56Gu55qE6Kej5p6Q5pWw5o2u44CCIildKSwgX3ZtLl92KCIgIiksIF9jKCdsaScsIFtfdm0uX3YoIuaIkeS7rOi/mOmcgOimgeWNj+iuruaYr+WPr+aJqeWxleeahO+8muW+gOWQjuaIkeS7rOWPr+iDvemcgOimgeW+gOWNj+iuruWktOWinuWKoOWPguaVsO+8jOWmguaenOaOpeaUtuaWueeahOayoeacieabtOaWsFJQQ+eahOeJiOacrO+8jOmCo+S5iOWwseWPr+iDvemUmeivr+ino+aekOS6huivt+axguWNj+iuruOAguaIkeS7rOWPr+S7peWinuWKoOS4gOS4quWbuuWumuS9jee9ru+8jOWOu+ivu+WPlumVv+W6puOAguW5tuS4lOWinuWKoOS4gOS4quWPr+aJqeWxleWtl+aute+8jOWmguaenOacieWinuWKoOWGheWuue+8jOWPr+S7peWGmeWFpeWcqOi/meS4quS9jee9ruOAgiIpXSldKSwgX3ZtLl92KCIgIiksIF9jKCdwJywgW19jKCdpbWcnLCB7CiAgICBhdHRyczogewogICAgICAic3JjIjogcmVxdWlyZSgiLi4vX2ltYWdlL2ltYWdlLTIwMjQwMTI3MTMxOTQ1NDMyLnBuZyIpLAogICAgICAiYWx0IjogImltYWdlLTIwMjQwMTI3MTMxOTQ1NDMyIgogICAgfQogIH0pXSldKTsKfTsKdmFyIHN0YXRpY1JlbmRlckZucyA9IFtdOwpleHBvcnQgeyByZW5kZXIsIHN0YXRpY1JlbmRlckZucyB9Ow=="},{"version":3,"names":["render","_vm","_c","_self","attrs","$parent","slotKey","staticClass","_v","require","staticRenderFns"],"sources":["/Users/yinglin/Documents/GitHub/PersonalBlog/docs/distributedsystem/communication/RPC.md"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('ContentSlotsDistributor',{attrs:{\"slot-key\":_vm.$parent.slotKey}},[_c('h1',{attrs:{\"id\":\"什么是rpc\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#什么是rpc\"}},[_vm._v(\"#\")]),_vm._v(\" 什么是RPC?\")]),_vm._v(\" \"),_c('p',[_vm._v(\"RPC的全称是Remote Procedure Call, 即远程过程调用。 RPC帮助我们屏蔽了网络编程细节，实现调用远程方法就跟调用本地方法一样的体验。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"RPC的主要作用体现在以下两方面：\")]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"屏蔽远程调用跟本地调用的区别，让我们感觉就是调用项目内的方法\")]),_vm._v(\" \"),_c('li',[_vm._v(\"隐藏底层网络通信的复杂性，让我们更专注业务逻辑\")])]),_vm._v(\" \"),_c('h1',{attrs:{\"id\":\"rpc通信流程\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#rpc通信流程\"}},[_vm._v(\"#\")]),_vm._v(\" RPC通信流程\")]),_vm._v(\" \"),_c('p',[_vm._v(\"在RPC框架中，服务调用的发起者叫做调用方，被调用的一方叫做服务的提供方。它们之间需要通过网络来传输数据。为了确保数据传输的可靠性，默认情况下, RPC是采用TCP来传输的。\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"../_image/image-20240126191717440.png\"),\"alt\":\"image-20240126191717440\"}})]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"发送请求和数据：由于网络传输过程中必须是二进制数据。在面向对象语言中，比如java，数据参数一般都是保存在对象当中的。所以我们需要把对象转变成可传输的二进制，并且要求这个转换算法是可逆的，这个过程叫做“序列化”。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"接收请求和数据：调用方把数据序列化成二进制数据后，经过TCP将数据发送给服务提供方。那么这里有一个问题就是服务提供方是如何知道一个请求的数据到哪里结束，是一个什么类型的请求呢？\")]),_vm._v(\" \"),_c('p',[_vm._v(\"我们是通过“协议”规定了数据包的类型和长度。大多数的协议会分成两个部分，分别是数据头和消息体。数据头一般用于身份识别，包括协议标识、数据大小、请求类型、序列化类型等信息；消息头主要是请求的业务参数信息和扩展属性等。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"据协议格式，服务提供方就可以正确地从二进制数据中分割出不同的请求来，同时根据请求类型和序列化类型，把二进制的消息体逆向还原成请求对象。这个过程叫作“反序列化”。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"回复请求：服务提供方再根据反序列化出来的请求对象找到对应的实现类，完成真正的方法调用，然后 把执行结果序列化后，回写到对应的 TCP 通道里面。调用方获取到应答的数据包后，再反 序列化成应答对象，这样调用方就完成了一次 RPC 调用。\")])])]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"../_image/image-20240126193618147.png\"),\"alt\":\"image-20240126193618147\"}})]),_vm._v(\" \"),_c('h1',{attrs:{\"id\":\"rpc协议\"}},[_c('a',{staticClass:\"header-anchor\",attrs:{\"href\":\"#rpc协议\"}},[_vm._v(\"#\")]),_vm._v(\" RPC协议\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"为什么需要协议？\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"因为我们需要把对象数据转变成二进制数据才能够在网络中传输，传输过程中，RPC可能会不会把数据放在一个数据包下一起发送，可能会拆分成好几个数据包发送，所以我们需要一个协议去规定，让接收方可以正确的分清楚数据的边界，正确解析数据。\")]),_vm._v(\" \"),_c('p',[_c('strong',[_vm._v(\"怎么设计一个RPC协议呢？\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"我们最熟悉的协议应该就是HTTP协议, RPC和HTTP协议都是应用层的协议。为什么我们不能直接使用HTTP协议呢？\")]),_vm._v(\" \"),_c('ol',[_c('li',[_c('p',[_vm._v(\"这是因为RPC主要是用来负责应用间的通信，所以会对性能要求比较高。但是HTTP协议的数据包大小相对请求数据本身要大的很多，又需要加入很多无用的内容，比如换行符号、回车符等。\")])]),_vm._v(\" \"),_c('li',[_c('p',[_vm._v(\"HTTP协议属于无状态协议，客户端无法对请求和响应进行关联，每次请求都需要重新建立连接，响应完成后再关闭连接。因此，对于要求高性能的RPC来说，HTTP协议基本是很难满足需求，所以 RPC 会选择设计更紧凑的私有协议\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"但是协议之间都有互通的地方，通过观察HTTP协议，我们可以从中学到什么？\")]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"../_image/image-20240127130500376.png\"),\"alt\":\"image-20240127130500376\"}})]),_vm._v(\" \"),_c('ol',[_c('li',[_vm._v(\"HTTP分成请求头和请求体两部分：RPC协议同样可以将数据包分成协议头和协议体。在协议头里面会存放参数信息。协议体就是二进制数据。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"HTTP请求头包含数据类型，压缩编码，语言等信息：设计RPC同样需要一个固定位置去存放一些请求的参数信息，比如消息长度，消息类型，序列化方式等信息，以便接收方可以正确的解析数据。\")]),_vm._v(\" \"),_c('li',[_vm._v(\"我们还需要协议是可扩展的：往后我们可能需要往协议头增加参数，如果接收方的没有更新RPC的版本，那么就可能错误解析了请求协议。我们可以增加一个固定位置，去读取长度。并且增加一个可扩展字段，如果有增加内容，可以写入在这个位置。\")])]),_vm._v(\" \"),_c('p',[_c('img',{attrs:{\"src\":require(\"../_image/image-20240127131945432.png\"),\"alt\":\"image-20240127131945432\"}})])])\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }"],"mappings":"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"}]}